---
interface Props {
  lang: 'en' | 'fr';
}

const { lang } = Astro.props;

const translations = {
  en: {
    home: 'Home',
    aboutUs: 'About Us',
    about: 'About the School',
    team: 'Our Team',
    programs: 'Programs',
    earlyYears: 'Early Years (2-5)',
    primary: 'Primary (6-11)',
    middleSchool: 'Middle School (11-14)',
    admissions: 'Admissions',
    tuition: 'Tuition',
    summerCamp: 'Holiday Camps',
    news: 'News',
    contact: 'Contact',
    langSwitch: 'Francais',
    applyNow: 'Book a Visit',
    phone: '+33 1 39 16 87 35',
    email: 'discover@forestinternationalschool.com'
  },
  fr: {
    home: 'Accueil',
    aboutUs: 'A Propos',
    about: 'Notre Ecole',
    team: 'Notre Equipe',
    programs: 'Programmes',
    earlyYears: 'Maternelle (2-5)',
    primary: 'Primaire (6-11)',
    middleSchool: 'College (11-14)',
    admissions: 'Admissions',
    tuition: 'Tarifs',
    summerCamp: 'Camps de Vacances',
    news: 'Actualites',
    contact: 'Contact',
    langSwitch: 'English',
    applyNow: 'Reserver une Visite',
    phone: '+33 1 39 16 87 35',
    email: 'discover@forestinternationalschool.com'
  }
};

const t = translations[lang];
const altLang = lang === 'en' ? 'fr' : 'en';
const basePath = `/${lang}`;
const newsPath = lang === 'en' ? `${basePath}/news` : `${basePath}/actualites`;
---

<!-- Top Bar -->
<div class="bg-[#1e3d29] text-white py-2 text-sm hidden md:block">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
    <div class="flex items-center gap-6">
      <a href={`tel:${t.phone.replace(/\s/g, '')}`} class="flex items-center gap-2 hover:text-[#c9a962] transition-colors">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
        </svg>
        {t.phone}
      </a>
      <a href={`mailto:${t.email}`} class="flex items-center gap-2 hover:text-[#c9a962] transition-colors">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
        </svg>
        {t.email}
      </a>
    </div>
    <div class="flex items-center gap-4">
      <span class="text-white/70">Mareil-Marly, Paris West</span>
      <span class="text-white/40">|</span>
      <a href={`/${altLang}`} class="flex items-center gap-1 hover:text-[#c9a962] transition-colors">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
        </svg>
        {t.langSwitch}
      </a>
    </div>
  </div>
</div>

<!-- Main Navigation -->
<nav id="main-nav" class="bg-white/95 backdrop-blur-md sticky top-0 z-50 border-b border-gray-100 transition-all duration-300">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-20">
      <!-- Logo -->
      <a href={basePath} class="flex items-center gap-3 group flex-shrink-0">
        <img src="/images/logo-header.png" alt="Forest International School Logo" class="w-16 h-16 object-contain rounded-full group-hover:scale-105 transition-transform duration-300 flex-shrink-0" />
        <div class="hidden sm:block whitespace-nowrap">
          <span class="text-xl font-bold text-[#1e3d29] tracking-tight block">Forest International</span>
          <div class="flex items-center gap-2">
            <span class="text-sm text-[#2d5a3d] font-medium">School of Paris</span>
            <span class="text-xs text-[#c9a962] font-semibold bg-[#c9a962]/10 px-2 py-0.5 rounded-full">Since 2003</span>
          </div>
        </div>
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center">
        <div class="flex items-center gap-1">
          <a href={basePath} class="px-4 py-2 text-gray-600 hover:text-[#2d5a3d] font-medium transition-colors rounded-lg hover:bg-[#2d5a3d]/5 whitespace-nowrap">{t.home}</a>

          <!-- About Us Dropdown -->
          <div class="relative group">
            <button class="px-4 py-2 text-gray-600 hover:text-[#2d5a3d] font-medium transition-colors flex items-center gap-1 rounded-lg hover:bg-[#2d5a3d]/5 whitespace-nowrap">
              {t.aboutUs}
              <svg class="w-4 h-4 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </button>
            <div class="absolute left-0 top-full pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
              <div class="w-56 bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden p-2">
                <a href={`${basePath}/about`} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-gradient-to-r hover:from-[#2d5a3d]/10 hover:to-transparent rounded-xl transition-all group/item">
                  <div class="w-10 h-10 bg-[#2d5a3d]/10 rounded-xl flex items-center justify-center group-hover/item:bg-[#2d5a3d]/20 transition-colors">
                    <svg class="w-5 h-5 text-[#2d5a3d]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                    </svg>
                  </div>
                  <div>
                    <div class="font-semibold text-[#1e3d29]">{t.about}</div>
                  </div>
                </a>
                <a href={`${basePath}/team`} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-gradient-to-r hover:from-[#2d5a3d]/10 hover:to-transparent rounded-xl transition-all group/item">
                  <div class="w-10 h-10 bg-[#c9a962]/20 rounded-xl flex items-center justify-center group-hover/item:bg-[#c9a962]/30 transition-colors">
                    <svg class="w-5 h-5 text-[#c9a962]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                  </div>
                  <div>
                    <div class="font-semibold text-[#1e3d29]">{t.team}</div>
                  </div>
                </a>
              </div>
            </div>
          </div>

          <!-- Programs Dropdown -->
          <div class="relative group">
            <button class="px-4 py-2 text-gray-600 hover:text-[#2d5a3d] font-medium transition-colors flex items-center gap-1 rounded-lg hover:bg-[#2d5a3d]/5 whitespace-nowrap">
              {t.programs}
              <svg class="w-4 h-4 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </button>
            <div class="absolute left-0 top-full pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
              <div class="w-64 bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden">
                <div class="p-2">
                  <a href={`${basePath}/early-years`} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-gradient-to-r hover:from-[#2d5a3d]/10 hover:to-transparent rounded-xl transition-all group/item">
                    <div class="w-10 h-10 bg-[#c9a962]/20 rounded-xl flex items-center justify-center group-hover/item:bg-[#c9a962]/30 transition-colors">
                      <span class="text-lg">üå±</span>
                    </div>
                    <div>
                      <div class="font-semibold text-[#1e3d29]">{t.earlyYears}</div>
                      <div class="text-xs text-gray-500">Nursery & Pre-School</div>
                    </div>
                  </a>
                  <a href={`${basePath}/primary`} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-gradient-to-r hover:from-[#2d5a3d]/10 hover:to-transparent rounded-xl transition-all group/item">
                    <div class="w-10 h-10 bg-[#2d5a3d]/10 rounded-xl flex items-center justify-center group-hover/item:bg-[#2d5a3d]/20 transition-colors">
                      <span class="text-lg">üå≥</span>
                    </div>
                    <div>
                      <div class="font-semibold text-[#1e3d29]">{t.primary}</div>
                      <div class="text-xs text-gray-500">Key Stage 1 & 2</div>
                    </div>
                  </a>
                  <a href={`${basePath}/middle-school`} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-gradient-to-r hover:from-[#2d5a3d]/10 hover:to-transparent rounded-xl transition-all group/item">
                    <div class="w-10 h-10 bg-[#1e3d29]/10 rounded-xl flex items-center justify-center group-hover/item:bg-[#1e3d29]/20 transition-colors">
                      <span class="text-lg">üèîÔ∏è</span>
                    </div>
                    <div>
                      <div class="font-semibold text-[#1e3d29]">{t.middleSchool}</div>
                      <div class="text-xs text-gray-500">Key Stage 3</div>
                    </div>
                  </a>
                </div>
                <div class="border-t border-gray-100 p-2 bg-[#faf8f5]">
                  <a href={`${basePath}/holiday-camps`} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-white rounded-xl transition-all group/item">
                    <div class="w-10 h-10 bg-[#c9a962]/30 rounded-xl flex items-center justify-center">
                      <span class="text-lg">‚òÄÔ∏è</span>
                    </div>
                    <div>
                      <div class="font-semibold text-[#c9a962]">{t.summerCamp}</div>
                      <div class="text-xs text-gray-500">Open to all children</div>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>

          <a href={`${basePath}/holiday-camps`} class="px-4 py-2 text-[#c9a962] hover:text-[#b8963d] font-semibold transition-colors rounded-lg hover:bg-[#c9a962]/10 whitespace-nowrap flex items-center gap-1">
            <span>‚òÄÔ∏è</span> {t.summerCamp}
          </a>
          <a href={`${basePath}/admissions`} class="px-4 py-2 text-gray-600 hover:text-[#2d5a3d] font-medium transition-colors rounded-lg hover:bg-[#2d5a3d]/5 whitespace-nowrap">{t.admissions}</a>
          <a href={`${basePath}/tuition`} class="px-4 py-2 text-gray-600 hover:text-[#2d5a3d] font-medium transition-colors rounded-lg hover:bg-[#2d5a3d]/5 whitespace-nowrap">{t.tuition}</a>
          <a href={newsPath} class="px-4 py-2 text-gray-600 hover:text-[#2d5a3d] font-medium transition-colors rounded-lg hover:bg-[#2d5a3d]/5 whitespace-nowrap">{t.news}</a>
        </div>

        <!-- CTA Button -->
        <a href={`${basePath}/contact`} class="ml-4 inline-flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-[#2d5a3d] to-[#4a7c5c] text-white font-semibold rounded-full hover:from-[#1e3d29] hover:to-[#2d5a3d] transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5 whitespace-nowrap">
          {t.applyNow}
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
          </svg>
        </a>
      </div>

      <!-- Mobile: Language + Menu -->
      <div class="flex items-center gap-3 lg:hidden">
        <a href={`/${altLang}`} class="text-sm font-medium text-[#2d5a3d] hover:text-[#1e3d29]">
          {t.langSwitch}
        </a>
        <button id="mobile-menu-btn" class="p-2 text-gray-700 hover:text-[#2d5a3d] hover:bg-[#2d5a3d]/5 rounded-lg transition-colors">
          <svg id="menu-open-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
          <svg id="menu-close-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Navigation -->
  <div id="mobile-menu" class="hidden lg:hidden bg-white border-t border-gray-100 max-h-[calc(100vh-5rem)] overflow-y-auto">
    <div class="max-w-6xl mx-auto px-4 py-4 space-y-1">
      <a href={basePath} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-[#2d5a3d]/5 rounded-xl font-medium">{t.home}</a>

      <div class="py-2">
        <div class="text-xs font-semibold text-gray-400 uppercase tracking-wider px-4 mb-2">{t.aboutUs}</div>
        <a href={`${basePath}/about`} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-[#2d5a3d]/5 rounded-xl">
          <span>üè´</span> {t.about}
        </a>
        <a href={`${basePath}/team`} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-[#2d5a3d]/5 rounded-xl">
          <span>üë•</span> {t.team}
        </a>
      </div>

      <div class="py-2">
        <div class="text-xs font-semibold text-gray-400 uppercase tracking-wider px-4 mb-2">{t.programs}</div>
        <a href={`${basePath}/early-years`} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-[#2d5a3d]/5 rounded-xl">
          <span>üå±</span> {t.earlyYears}
        </a>
        <a href={`${basePath}/primary`} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-[#2d5a3d]/5 rounded-xl">
          <span>üå≥</span> {t.primary}
        </a>
        <a href={`${basePath}/middle-school`} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-[#2d5a3d]/5 rounded-xl">
          <span>üèîÔ∏è</span> {t.middleSchool}
        </a>
        <a href={`${basePath}/holiday-camps`} class="flex items-center gap-3 px-4 py-3 text-[#c9a962] hover:bg-[#c9a962]/10 rounded-xl font-medium">
          <span>‚òÄÔ∏è</span> {t.summerCamp}
        </a>
      </div>

      <a href={`${basePath}/holiday-camps`} class="flex items-center gap-3 px-4 py-3 text-[#c9a962] hover:bg-[#c9a962]/10 rounded-xl font-semibold border border-[#c9a962]/30">
        <span>‚òÄÔ∏è</span> {t.summerCamp}
      </a>
      <a href={`${basePath}/admissions`} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-[#2d5a3d]/5 rounded-xl font-medium">{t.admissions}</a>
      <a href={`${basePath}/tuition`} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-[#2d5a3d]/5 rounded-xl font-medium">{t.tuition}</a>
      <a href={newsPath} class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-[#2d5a3d]/5 rounded-xl font-medium">{t.news}</a>

      <div class="pt-4 border-t border-gray-100">
        <a href={`${basePath}/contact`} class="flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-[#2d5a3d] to-[#4a7c5c] text-white font-semibold rounded-xl">
          {t.applyNow}
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
          </svg>
        </a>
      </div>

      <div class="pt-4 border-t border-gray-100 flex items-center justify-center gap-4 text-sm text-gray-500">
        <a href={`tel:${t.phone.replace(/\s/g, '')}`} class="flex items-center gap-1 hover:text-[#2d5a3d]">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
          </svg>
          {t.phone}
        </a>
      </div>
    </div>
  </div>
</nav>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const openIcon = document.getElementById('menu-open-icon');
  const closeIcon = document.getElementById('menu-close-icon');

  menuBtn?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
    openIcon?.classList.toggle('hidden');
    closeIcon?.classList.toggle('hidden');
  });

  // Add shadow on scroll
  const nav = document.getElementById('main-nav');
  window.addEventListener('scroll', () => {
    if (window.scrollY > 10) {
      nav?.classList.add('shadow-md');
      nav?.classList.remove('border-b', 'border-gray-100');
    } else {
      nav?.classList.remove('shadow-md');
      nav?.classList.add('border-b', 'border-gray-100');
    }
  });
</script>
